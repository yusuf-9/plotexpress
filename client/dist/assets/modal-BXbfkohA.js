import{c as ae,r as a,j as e,u as Be,a as xe,b as Me,d as ve,P as O,e as $e,R as Kt,I as qt,f as L,g as Yt,h as _,C as he,i as Xt,B as J,k as ze,l as Ge,m as Zt,n as Ue,o as Jt,p as Qt,q as K,A as es,s as Q,t as ts,v as We,V as ss,w as os,x as ns,y as rs,z as as,S as ls,F as is,D as cs,E as ds,G as Ve,H as us,J as Z,K as ps,T as ms,L as hs,M as Pe,N as Ke,O as fs,Q as xs,U as gs,W as vs,X as bs,Y as Ss}from"./index-DeIxhreT.js";import{D as ys,a as ws,b as Cs,c as Ns,d as Ts,e as js}from"./index-DJm_gjF_.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 11.207a.5.5 0 0 1 .146-.353l2-2a.5.5 0 0 1 .708 0l3.292 3.292a.5.5 0 0 0 .708 0l4.292-4.292a.5.5 0 0 1 .854.353V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z",key:"q0gr47"}]],Ps=ae("ChartArea",Is);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],_s=ae("ChartLine",Es);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=[["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}],["circle",{cx:"18.5",cy:"5.5",r:".5",fill:"currentColor",key:"lysivs"}],["circle",{cx:"11.5",cy:"11.5",r:".5",fill:"currentColor",key:"byv1b8"}],["circle",{cx:"7.5",cy:"16.5",r:".5",fill:"currentColor",key:"nkw3mc"}],["circle",{cx:"17.5",cy:"14.5",r:".5",fill:"currentColor",key:"1gjh6j"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}]],As=ae("ChartScatter",ks);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],qe=ae("Check",Rs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ye=ae("ChevronDown",Ms);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ls=ae("ChevronUp",Ds),Os=()=>e.jsxs(ys,{className:"px-6 py-4",children:[e.jsx(ws,{children:"Create a New Chart"}),e.jsx(Cs,{children:"Follow the steps to create your custom chart."})]}),Fs=a.memo(Os);var De="Tabs",[Vs,dn]=Me(De,[$e]),Xe=$e(),[Hs,Le]=Vs(De),Ze=a.forwardRef((s,o)=>{const{__scopeTabs:t,value:n,onValueChange:r,defaultValue:d,orientation:i="horizontal",dir:l,activationMode:c="automatic",...u}=s,f=Be(l),[g,p]=xe({prop:n,onChange:r,defaultProp:d});return e.jsx(Hs,{scope:t,baseId:ve(),value:g,onValueChange:p,orientation:i,dir:f,activationMode:c,children:e.jsx(O.div,{dir:f,"data-orientation":i,...u,ref:o})})});Ze.displayName=De;var Je="TabsList",Qe=a.forwardRef((s,o)=>{const{__scopeTabs:t,loop:n=!0,...r}=s,d=Le(Je,t),i=Xe(t);return e.jsx(Kt,{asChild:!0,...i,orientation:d.orientation,dir:d.dir,loop:n,children:e.jsx(O.div,{role:"tablist","aria-orientation":d.orientation,...r,ref:o})})});Qe.displayName=Je;var et="TabsTrigger",tt=a.forwardRef((s,o)=>{const{__scopeTabs:t,value:n,disabled:r=!1,...d}=s,i=Le(et,t),l=Xe(t),c=nt(i.baseId,n),u=rt(i.baseId,n),f=n===i.value;return e.jsx(qt,{asChild:!0,...l,focusable:!r,active:f,children:e.jsx(O.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":u,"data-state":f?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:c,...d,ref:o,onMouseDown:L(s.onMouseDown,g=>{!r&&g.button===0&&g.ctrlKey===!1?i.onValueChange(n):g.preventDefault()}),onKeyDown:L(s.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&i.onValueChange(n)}),onFocus:L(s.onFocus,()=>{const g=i.activationMode!=="manual";!f&&!r&&g&&i.onValueChange(n)})})})});tt.displayName=et;var st="TabsContent",ot=a.forwardRef((s,o)=>{const{__scopeTabs:t,value:n,forceMount:r,children:d,...i}=s,l=Le(st,t),c=nt(l.baseId,n),u=rt(l.baseId,n),f=n===l.value,g=a.useRef(f);return a.useEffect(()=>{const p=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(p)},[]),e.jsx(Yt,{present:r||f,children:({present:p})=>e.jsx(O.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...i,ref:o,style:{...s.style,animationDuration:g.current?"0s":void 0},children:p&&d})})});ot.displayName=st;function nt(s,o){return`${s}-trigger-${o}`}function rt(s,o){return`${s}-content-${o}`}var Bs=Ze,$s=Qe,zs=tt,Gs=ot;function at({className:s,...o}){return e.jsx(Bs,{"data-slot":"tabs",className:_("flex flex-col gap-2",s),...o})}function lt({className:s,...o}){return e.jsx($s,{"data-slot":"tabs-list",className:_("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-1",s),...o})}function it({className:s,...o}){return e.jsx(zs,{"data-slot":"tabs-trigger",className:_("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring inline-flex items-center justify-center gap-1.5 rounded-md px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...o})}function ct({className:s,...o}){return e.jsx(Gs,{"data-slot":"tabs-content",className:_("flex-1 outline-none",s),...o})}const Us=[{icon:Xt,label:"Bar",key:he.BAR},{icon:_s,label:"Line",key:he.LINE},{icon:As,label:"Scatter",key:he.SCATTER},{icon:Ps,label:"Area",key:he.AREA}],U={CHART_TYPE_SELECT:{label:"Choose Chart Type",value:1},DATA_SELECT:{label:"Select Data Source",value:2},CUSTOMIZATION:{label:"Customize",value:3}},Ws=s=>{const{currentStep:o,onStepChange:t,checkIfStepIsDisabled:n}=s;return e.jsx(lt,{className:"w-full justify-start h-12 px-6 border-b border-b-secondary bg-primary-foreground",children:Object.values(U).map(r=>{const d=n(r.value),i=r.value===o;return e.jsxs(it,{value:r.value.toString(),disabled:d,onClick:()=>t(r.value),className:_("flex-1 h-full data-[state=active]:font-semibold data-[state=active]:shadow-none !bg-primary-foreground transition-all cursor-pointer",d&&"!cursor-not-allowed"),children:[e.jsx("span",{className:_(`mr-2 w-6 h-6 rounded-full ${r.value<=o?"bg-transparent text-primary border border-primary":"bg-foreground/10 text-accent-foreground"} flex items-center justify-center text-sm`,i&&"!bg-primary !text-background !border-primary rounded-full"),children:r.value}),e.jsx("span",{className:r.value<=o?"text-primary":"text-muted-foreground",children:r.label})]},r.value)})})},Ks=a.memo(Ws),qs=s=>{const{disableNextStep:o,onNext:t,onPrevious:n,isLastStep:r,disablePreviousStep:d}=s;return e.jsxs("div",{className:"flex-shrink-0 px-6 py-4 flex justify-between items-center border-t border-t-secondary bg-primary-foreground",children:[e.jsx(J,{onClick:n,variant:"outline",disabled:d,children:"Previous"}),e.jsx(J,{variant:"default",disabled:o,onClick:t,children:r?"Finish":"Next"})]})},Ys=a.memo(qs),Xs=s=>{const{tabValue:o,sectionJsx:t,chartPreviewJsx:n}=s,[r,d]=a.useState(!0),[i,l]=a.useState(!0),c=()=>{const u=!r;d(u),setTimeout(()=>{l(u)},300)};return e.jsx(ct,{value:o,className:"flex-grow flex flex-col overflow-hidden",children:e.jsxs("div",{className:"flex flex-grow p-6 space-x-6",children:[e.jsx("div",{className:_("flex-grow flex flex-col bg-background-light rounded-lg shadow-sm border border- transition-all duration-300",r?"w-2/3":"flex-grow"),children:t}),e.jsxs("div",{className:_("bg-background-light py-2 px-1 space-y-6 rounded-lg shadow-sm border border- transition-all duration-300 flex flex-col",r?"w-1/3":"w-16"),children:[e.jsxs("div",{className:"flex items-center p-1",children:[e.jsx(J,{variant:"ghost",className:"p-2",onClick:c,children:r?e.jsx(Ge,{className:"h-6 w-6"}):e.jsx(ze,{className:"h-6 w-6"})}),r&&e.jsx("h4",{className:"font-semibold mb-0 text-xl flex-grow",children:"Chart Preview"})]}),i&&r&&e.jsx("div",{className:_("flex-grow flex w-full items-center relative"),children:n||e.jsxs("div",{className:" absolute w-full top-1/2 -translate-y-1/2 flex flex-col items-center justify-center gap-5",children:[e.jsx(Zt,{className:"text-primary/50 h-20 w-20"}),e.jsx("p",{className:"text-accent-foreground text-center",children:"Select traces on the left to preview chart"})]})})]})]})})},Zs=a.memo(Xs),Js=s=>{const{tabValue:o,onChartSelect:t,selectedChartType:n}=s;return e.jsxs(ct,{value:o,className:"flex-grow flex flex-col p-6 overflow-y-auto",children:[e.jsx("h2",{className:"text-3xl font-medium text-foreground my-8 text-center tracking-normal",children:"Select Chart Type"}),e.jsx("div",{className:"flex-grow w-full grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6 pt-20",children:Us.map(r=>e.jsxs(J,{variant:"outline",className:_("h-52 flex flex-col items-center justify-center gap-4 bg-gradient-to-br transition-all duration-300 shadow-sm hover:shadow-md","from-white to-primary/10 hover:from-white hover:to-primary/30","dark:from-secondary dark:to-primary/30 dark:hover:to-primary/80",n===r.key&&"from-primary-light to-primary/50 dark:from-primary/40 dark:to-primary/80 shadow-md"),onClick:()=>t(r.key),children:[e.jsx(r.icon,{className:"!h-16 !w-16 mb-2 text-primary"}),e.jsx("span",{className:"font-medium text-2xl text-foreground",children:r.label})]},r.label))})]})},Qs=a.memo(Js);function dt(s){const o=a.useRef({value:s,previous:s});return a.useMemo(()=>(o.current.value!==s&&(o.current.previous=o.current.value,o.current.value=s),o.current.previous),[s])}var eo=[" ","Enter","ArrowUp","ArrowDown"],to=[" ","Enter"],ue="Select",[be,Se,so]=Qt(ue),[le,un]=Me(ue,[so,Ue]),ye=Ue(),[oo,ee]=le(ue),[no,ro]=le(ue),ut=s=>{const{__scopeSelect:o,children:t,open:n,defaultOpen:r,onOpenChange:d,value:i,defaultValue:l,onValueChange:c,dir:u,name:f,autoComplete:g,disabled:p,required:C,form:T}=s,m=ye(o),[S,y]=a.useState(null),[h,v]=a.useState(null),[k,M]=a.useState(!1),H=Be(u),[F=!1,B]=xe({prop:n,defaultProp:r,onChange:d}),[x,b]=xe({prop:i,defaultProp:l,onChange:c}),N=a.useRef(null),j=S?T||!!S.closest("form"):!0,[I,D]=a.useState(new Set),V=Array.from(I).map($=>$.props.value).join(";");return e.jsx(Jt,{...m,children:e.jsxs(oo,{required:C,scope:o,trigger:S,onTriggerChange:y,valueNode:h,onValueNodeChange:v,valueNodeHasChildren:k,onValueNodeHasChildrenChange:M,contentId:ve(),value:x,onValueChange:b,open:F,onOpenChange:B,dir:H,triggerPointerDownPosRef:N,disabled:p,children:[e.jsx(be.Provider,{scope:o,children:e.jsx(no,{scope:s.__scopeSelect,onNativeOptionAdd:a.useCallback($=>{D(q=>new Set(q).add($))},[]),onNativeOptionRemove:a.useCallback($=>{D(q=>{const Y=new Set(q);return Y.delete($),Y})},[]),children:t})}),j?e.jsxs(Mt,{"aria-hidden":!0,required:C,tabIndex:-1,name:f,autoComplete:g,value:x,onChange:$=>b($.target.value),disabled:p,form:T,children:[x===void 0?e.jsx("option",{value:""}):null,Array.from(I)]},V):null]})})};ut.displayName=ue;var pt="SelectTrigger",mt=a.forwardRef((s,o)=>{const{__scopeSelect:t,disabled:n=!1,...r}=s,d=ye(t),i=ee(pt,t),l=i.disabled||n,c=K(o,i.onTriggerChange),u=Se(t),f=a.useRef("touch"),[g,p,C]=Dt(m=>{const S=u().filter(v=>!v.disabled),y=S.find(v=>v.value===i.value),h=Lt(S,m,y);h!==void 0&&i.onValueChange(h.value)}),T=m=>{l||(i.onOpenChange(!0),C()),m&&(i.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return e.jsx(es,{asChild:!0,...d,children:e.jsx(O.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Rt(i.value)?"":void 0,...r,ref:c,onClick:L(r.onClick,m=>{m.currentTarget.focus(),f.current!=="mouse"&&T(m)}),onPointerDown:L(r.onPointerDown,m=>{f.current=m.pointerType;const S=m.target;S.hasPointerCapture(m.pointerId)&&S.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(T(m),m.preventDefault())}),onKeyDown:L(r.onKeyDown,m=>{const S=g.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&p(m.key),!(S&&m.key===" ")&&eo.includes(m.key)&&(T(),m.preventDefault())})})})});mt.displayName=pt;var ht="SelectValue",ft=a.forwardRef((s,o)=>{const{__scopeSelect:t,className:n,style:r,children:d,placeholder:i="",...l}=s,c=ee(ht,t),{onValueNodeHasChildrenChange:u}=c,f=d!==void 0,g=K(o,c.onValueNodeChange);return Q(()=>{u(f)},[u,f]),e.jsx(O.span,{...l,ref:g,style:{pointerEvents:"none"},children:Rt(c.value)?e.jsx(e.Fragment,{children:i}):d})});ft.displayName=ht;var ao="SelectIcon",xt=a.forwardRef((s,o)=>{const{__scopeSelect:t,children:n,...r}=s;return e.jsx(O.span,{"aria-hidden":!0,...r,ref:o,children:n||"▼"})});xt.displayName=ao;var lo="SelectPortal",gt=s=>e.jsx(ts,{asChild:!0,...s});gt.displayName=lo;var ne="SelectContent",vt=a.forwardRef((s,o)=>{const t=ee(ne,s.__scopeSelect),[n,r]=a.useState();if(Q(()=>{r(new DocumentFragment)},[]),!t.open){const d=n;return d?We.createPortal(e.jsx(bt,{scope:s.__scopeSelect,children:e.jsx(be.Slot,{scope:s.__scopeSelect,children:e.jsx("div",{children:s.children})})}),d):null}return e.jsx(St,{...s,ref:o})});vt.displayName=ne;var W=10,[bt,te]=le(ne),io="SelectContentImpl",St=a.forwardRef((s,o)=>{const{__scopeSelect:t,position:n="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:d,onPointerDownOutside:i,side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:g,collisionBoundary:p,collisionPadding:C,sticky:T,hideWhenDetached:m,avoidCollisions:S,...y}=s,h=ee(ne,t),[v,k]=a.useState(null),[M,H]=a.useState(null),F=K(o,w=>k(w)),[B,x]=a.useState(null),[b,N]=a.useState(null),j=Se(t),[I,D]=a.useState(!1),V=a.useRef(!1);a.useEffect(()=>{if(v)return ns(v)},[v]),rs();const $=a.useCallback(w=>{const[R,...z]=j().map(E=>E.ref.current),[A]=z.slice(-1),P=document.activeElement;for(const E of w)if(E===P||(E==null||E.scrollIntoView({block:"nearest"}),E===R&&M&&(M.scrollTop=0),E===A&&M&&(M.scrollTop=M.scrollHeight),E==null||E.focus(),document.activeElement!==P))return},[j,M]),q=a.useCallback(()=>$([B,v]),[$,B,v]);a.useEffect(()=>{I&&q()},[I,q]);const{onOpenChange:Y,triggerPointerDownPosRef:X}=h;a.useEffect(()=>{if(v){let w={x:0,y:0};const R=A=>{var P,E;w={x:Math.abs(Math.round(A.pageX)-(((P=X.current)==null?void 0:P.x)??0)),y:Math.abs(Math.round(A.pageY)-(((E=X.current)==null?void 0:E.y)??0))}},z=A=>{w.x<=10&&w.y<=10?A.preventDefault():v.contains(A.target)||Y(!1),document.removeEventListener("pointermove",R),X.current=null};return X.current!==null&&(document.addEventListener("pointermove",R),document.addEventListener("pointerup",z,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",z,{capture:!0})}}},[v,Y,X]),a.useEffect(()=>{const w=()=>Y(!1);return window.addEventListener("blur",w),window.addEventListener("resize",w),()=>{window.removeEventListener("blur",w),window.removeEventListener("resize",w)}},[Y]);const[we,pe]=Dt(w=>{const R=j().filter(P=>!P.disabled),z=R.find(P=>P.ref.current===document.activeElement),A=Lt(R,w,z);A&&setTimeout(()=>A.ref.current.focus())}),Ce=a.useCallback((w,R,z)=>{const A=!V.current&&!z;(h.value!==void 0&&h.value===R||A)&&(x(w),A&&(V.current=!0))},[h.value]),Ne=a.useCallback(()=>v==null?void 0:v.focus(),[v]),re=a.useCallback((w,R,z)=>{const A=!V.current&&!z;(h.value!==void 0&&h.value===R||A)&&N(w)},[h.value]),me=n==="popper"?Ee:yt,ie=me===Ee?{side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:g,collisionBoundary:p,collisionPadding:C,sticky:T,hideWhenDetached:m,avoidCollisions:S}:{};return e.jsx(bt,{scope:t,content:v,viewport:M,onViewportChange:H,itemRefCallback:Ce,selectedItem:B,onItemLeave:Ne,itemTextRefCallback:re,focusSelectedItem:q,selectedItemText:b,position:n,isPositioned:I,searchRef:we,children:e.jsx(as,{as:ls,allowPinchZoom:!0,children:e.jsx(is,{asChild:!0,trapped:h.open,onMountAutoFocus:w=>{w.preventDefault()},onUnmountAutoFocus:L(r,w=>{var R;(R=h.trigger)==null||R.focus({preventScroll:!0}),w.preventDefault()}),children:e.jsx(cs,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:d,onPointerDownOutside:i,onFocusOutside:w=>w.preventDefault(),onDismiss:()=>h.onOpenChange(!1),children:e.jsx(me,{role:"listbox",id:h.contentId,"data-state":h.open?"open":"closed",dir:h.dir,onContextMenu:w=>w.preventDefault(),...y,...ie,onPlaced:()=>D(!0),ref:F,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:L(y.onKeyDown,w=>{const R=w.ctrlKey||w.altKey||w.metaKey;if(w.key==="Tab"&&w.preventDefault(),!R&&w.key.length===1&&pe(w.key),["ArrowUp","ArrowDown","Home","End"].includes(w.key)){let A=j().filter(P=>!P.disabled).map(P=>P.ref.current);if(["ArrowUp","End"].includes(w.key)&&(A=A.slice().reverse()),["ArrowUp","ArrowDown"].includes(w.key)){const P=w.target,E=A.indexOf(P);A=A.slice(E+1)}setTimeout(()=>$(A)),w.preventDefault()}})})})})})})});St.displayName=io;var co="SelectItemAlignedPosition",yt=a.forwardRef((s,o)=>{const{__scopeSelect:t,onPlaced:n,...r}=s,d=ee(ne,t),i=te(ne,t),[l,c]=a.useState(null),[u,f]=a.useState(null),g=K(o,F=>f(F)),p=Se(t),C=a.useRef(!1),T=a.useRef(!0),{viewport:m,selectedItem:S,selectedItemText:y,focusSelectedItem:h}=i,v=a.useCallback(()=>{if(d.trigger&&d.valueNode&&l&&u&&m&&S&&y){const F=d.trigger.getBoundingClientRect(),B=u.getBoundingClientRect(),x=d.valueNode.getBoundingClientRect(),b=y.getBoundingClientRect();if(d.dir!=="rtl"){const P=b.left-B.left,E=x.left-P,se=F.left-E,oe=F.width+se,Te=Math.max(oe,B.width),je=window.innerWidth-W,Ie=Ve(E,[W,Math.max(W,je-Te)]);l.style.minWidth=oe+"px",l.style.left=Ie+"px"}else{const P=B.right-b.right,E=window.innerWidth-x.right-P,se=window.innerWidth-F.right-E,oe=F.width+se,Te=Math.max(oe,B.width),je=window.innerWidth-W,Ie=Ve(E,[W,Math.max(W,je-Te)]);l.style.minWidth=oe+"px",l.style.right=Ie+"px"}const N=p(),j=window.innerHeight-W*2,I=m.scrollHeight,D=window.getComputedStyle(u),V=parseInt(D.borderTopWidth,10),$=parseInt(D.paddingTop,10),q=parseInt(D.borderBottomWidth,10),Y=parseInt(D.paddingBottom,10),X=V+$+I+Y+q,we=Math.min(S.offsetHeight*5,X),pe=window.getComputedStyle(m),Ce=parseInt(pe.paddingTop,10),Ne=parseInt(pe.paddingBottom,10),re=F.top+F.height/2-W,me=j-re,ie=S.offsetHeight/2,w=S.offsetTop+ie,R=V+$+w,z=X-R;if(R<=re){const P=N.length>0&&S===N[N.length-1].ref.current;l.style.bottom="0px";const E=u.clientHeight-m.offsetTop-m.offsetHeight,se=Math.max(me,ie+(P?Ne:0)+E+q),oe=R+se;l.style.height=oe+"px"}else{const P=N.length>0&&S===N[0].ref.current;l.style.top="0px";const se=Math.max(re,V+m.offsetTop+(P?Ce:0)+ie)+z;l.style.height=se+"px",m.scrollTop=R-re+m.offsetTop}l.style.margin=`${W}px 0`,l.style.minHeight=we+"px",l.style.maxHeight=j+"px",n==null||n(),requestAnimationFrame(()=>C.current=!0)}},[p,d.trigger,d.valueNode,l,u,m,S,y,d.dir,n]);Q(()=>v(),[v]);const[k,M]=a.useState();Q(()=>{u&&M(window.getComputedStyle(u).zIndex)},[u]);const H=a.useCallback(F=>{F&&T.current===!0&&(v(),h==null||h(),T.current=!1)},[v,h]);return e.jsx(po,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:C,onScrollButtonChange:H,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:e.jsx(O.div,{...r,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});yt.displayName=co;var uo="SelectPopperPosition",Ee=a.forwardRef((s,o)=>{const{__scopeSelect:t,align:n="start",collisionPadding:r=W,...d}=s,i=ye(t);return e.jsx(ds,{...i,...d,ref:o,align:n,collisionPadding:r,style:{boxSizing:"border-box",...d.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ee.displayName=uo;var[po,Oe]=le(ne,{}),_e="SelectViewport",wt=a.forwardRef((s,o)=>{const{__scopeSelect:t,nonce:n,...r}=s,d=te(_e,t),i=Oe(_e,t),l=K(o,d.onViewportChange),c=a.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(be.Slot,{scope:t,children:e.jsx(O.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:L(r.onScroll,u=>{const f=u.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:p}=i;if(p!=null&&p.current&&g){const C=Math.abs(c.current-f.scrollTop);if(C>0){const T=window.innerHeight-W*2,m=parseFloat(g.style.minHeight),S=parseFloat(g.style.height),y=Math.max(m,S);if(y<T){const h=y+C,v=Math.min(T,h),k=h-v;g.style.height=v+"px",g.style.bottom==="0px"&&(f.scrollTop=k>0?k:0,g.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});wt.displayName=_e;var Ct="SelectGroup",[mo,ho]=le(Ct),fo=a.forwardRef((s,o)=>{const{__scopeSelect:t,...n}=s,r=ve();return e.jsx(mo,{scope:t,id:r,children:e.jsx(O.div,{role:"group","aria-labelledby":r,...n,ref:o})})});fo.displayName=Ct;var Nt="SelectLabel",xo=a.forwardRef((s,o)=>{const{__scopeSelect:t,...n}=s,r=ho(Nt,t);return e.jsx(O.div,{id:r.id,...n,ref:o})});xo.displayName=Nt;var ge="SelectItem",[go,Tt]=le(ge),jt=a.forwardRef((s,o)=>{const{__scopeSelect:t,value:n,disabled:r=!1,textValue:d,...i}=s,l=ee(ge,t),c=te(ge,t),u=l.value===n,[f,g]=a.useState(d??""),[p,C]=a.useState(!1),T=K(o,h=>{var v;return(v=c.itemRefCallback)==null?void 0:v.call(c,h,n,r)}),m=ve(),S=a.useRef("touch"),y=()=>{r||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(go,{scope:t,value:n,disabled:r,textId:m,isSelected:u,onItemTextChange:a.useCallback(h=>{g(v=>v||((h==null?void 0:h.textContent)??"").trim())},[]),children:e.jsx(be.ItemSlot,{scope:t,value:n,disabled:r,textValue:f,children:e.jsx(O.div,{role:"option","aria-labelledby":m,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...i,ref:T,onFocus:L(i.onFocus,()=>C(!0)),onBlur:L(i.onBlur,()=>C(!1)),onClick:L(i.onClick,()=>{S.current!=="mouse"&&y()}),onPointerUp:L(i.onPointerUp,()=>{S.current==="mouse"&&y()}),onPointerDown:L(i.onPointerDown,h=>{S.current=h.pointerType}),onPointerMove:L(i.onPointerMove,h=>{var v;S.current=h.pointerType,r?(v=c.onItemLeave)==null||v.call(c):S.current==="mouse"&&h.currentTarget.focus({preventScroll:!0})}),onPointerLeave:L(i.onPointerLeave,h=>{var v;h.currentTarget===document.activeElement&&((v=c.onItemLeave)==null||v.call(c))}),onKeyDown:L(i.onKeyDown,h=>{var k;((k=c.searchRef)==null?void 0:k.current)!==""&&h.key===" "||(to.includes(h.key)&&y(),h.key===" "&&h.preventDefault())})})})})});jt.displayName=ge;var ce="SelectItemText",It=a.forwardRef((s,o)=>{const{__scopeSelect:t,className:n,style:r,...d}=s,i=ee(ce,t),l=te(ce,t),c=Tt(ce,t),u=ro(ce,t),[f,g]=a.useState(null),p=K(o,y=>g(y),c.onItemTextChange,y=>{var h;return(h=l.itemTextRefCallback)==null?void 0:h.call(l,y,c.value,c.disabled)}),C=f==null?void 0:f.textContent,T=a.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:C},c.value),[c.disabled,c.value,C]),{onNativeOptionAdd:m,onNativeOptionRemove:S}=u;return Q(()=>(m(T),()=>S(T)),[m,S,T]),e.jsxs(e.Fragment,{children:[e.jsx(O.span,{id:c.textId,...d,ref:p}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?We.createPortal(d.children,i.valueNode):null]})});It.displayName=ce;var Pt="SelectItemIndicator",Et=a.forwardRef((s,o)=>{const{__scopeSelect:t,...n}=s;return Tt(Pt,t).isSelected?e.jsx(O.span,{"aria-hidden":!0,...n,ref:o}):null});Et.displayName=Pt;var ke="SelectScrollUpButton",_t=a.forwardRef((s,o)=>{const t=te(ke,s.__scopeSelect),n=Oe(ke,s.__scopeSelect),[r,d]=a.useState(!1),i=K(o,n.onScrollButtonChange);return Q(()=>{if(t.viewport&&t.isPositioned){let l=function(){const u=c.scrollTop>0;d(u)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),r?e.jsx(At,{...s,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});_t.displayName=ke;var Ae="SelectScrollDownButton",kt=a.forwardRef((s,o)=>{const t=te(Ae,s.__scopeSelect),n=Oe(Ae,s.__scopeSelect),[r,d]=a.useState(!1),i=K(o,n.onScrollButtonChange);return Q(()=>{if(t.viewport&&t.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<u;d(f)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),r?e.jsx(At,{...s,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});kt.displayName=Ae;var At=a.forwardRef((s,o)=>{const{__scopeSelect:t,onAutoScroll:n,...r}=s,d=te("SelectScrollButton",t),i=a.useRef(null),l=Se(t),c=a.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return a.useEffect(()=>()=>c(),[c]),Q(()=>{var f;const u=l().find(g=>g.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),e.jsx(O.div,{"aria-hidden":!0,...r,ref:o,style:{flexShrink:0,...r.style},onPointerDown:L(r.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(n,50))}),onPointerMove:L(r.onPointerMove,()=>{var u;(u=d.onItemLeave)==null||u.call(d),i.current===null&&(i.current=window.setInterval(n,50))}),onPointerLeave:L(r.onPointerLeave,()=>{c()})})}),vo="SelectSeparator",bo=a.forwardRef((s,o)=>{const{__scopeSelect:t,...n}=s;return e.jsx(O.div,{"aria-hidden":!0,...n,ref:o})});bo.displayName=vo;var Re="SelectArrow",So=a.forwardRef((s,o)=>{const{__scopeSelect:t,...n}=s,r=ye(t),d=ee(Re,t),i=te(Re,t);return d.open&&i.position==="popper"?e.jsx(us,{...r,...n,ref:o}):null});So.displayName=Re;function Rt(s){return s===""||s===void 0}var Mt=a.forwardRef((s,o)=>{const{value:t,...n}=s,r=a.useRef(null),d=K(o,r),i=dt(t);return a.useEffect(()=>{const l=r.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&f){const g=new Event("change",{bubbles:!0});f.call(l,t),l.dispatchEvent(g)}},[i,t]),e.jsx(ss,{asChild:!0,children:e.jsx("select",{...n,ref:d,defaultValue:t})})});Mt.displayName="BubbleSelect";function Dt(s){const o=os(s),t=a.useRef(""),n=a.useRef(0),r=a.useCallback(i=>{const l=t.current+i;o(l),function c(u){t.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[o]),d=a.useCallback(()=>{t.current="",window.clearTimeout(n.current)},[]);return a.useEffect(()=>()=>window.clearTimeout(n.current),[]),[t,r,d]}function Lt(s,o,t){const r=o.length>1&&Array.from(o).every(u=>u===o[0])?o[0]:o,d=t?s.indexOf(t):-1;let i=yo(s,Math.max(d,0));r.length===1&&(i=i.filter(u=>u!==t));const c=i.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return c!==t?c:void 0}function yo(s,o){return s.map((t,n)=>s[(o+n)%s.length])}var wo=ut,Co=mt,No=ft,To=xt,jo=gt,Io=vt,Po=wt,Eo=jt,_o=It,ko=Et,Ao=_t,Ro=kt;function Ot({...s}){return e.jsx(wo,{"data-slot":"select",...s})}function Ft({...s}){return e.jsx(No,{"data-slot":"select-value",...s})}function Vt({className:s,children:o,...t}){return e.jsxs(Co,{"data-slot":"select-trigger",className:_("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-full items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t,children:[o,e.jsx(To,{asChild:!0,children:e.jsx(Ye,{className:"size-4 opacity-50"})})]})}function Ht({className:s,children:o,position:t="popper",...n}){return e.jsx(jo,{children:e.jsxs(Io,{"data-slot":"select-content",className:_("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...n,children:[e.jsx(Mo,{}),e.jsx(Po,{className:_("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:o}),e.jsx(Do,{})]})})}function de({className:s,children:o,...t}){return e.jsxs(Eo,{"data-slot":"select-item",className:_("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...t,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(ko,{children:e.jsx(qe,{className:"size-4"})})}),e.jsx(_o,{children:o})]})}function Mo({className:s,...o}){return e.jsx(Ao,{"data-slot":"select-scroll-up-button",className:_("flex cursor-default items-center justify-center py-1",s),...o,children:e.jsx(Ls,{className:"size-4"})})}function Do({className:s,...o}){return e.jsx(Ro,{"data-slot":"select-scroll-down-button",className:_("flex cursor-default items-center justify-center py-1",s),...o,children:e.jsx(Ye,{className:"size-4"})})}function Bt(s,o){const t=a.useRef(void 0);return a.useCallback((...n)=>{t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{s(...n)},o)},[s,o])}const Lo=s=>{const{activeAxis:o,axisOptions:t,selectedTraceIndex:n,onTraceEdit:r,onAxisOptionClick:d,traces:i,uploadedFiles:l,onTraceDelete:c,onTraceSettingsItemEdit:u}=s,f=Bt(u,1e3),g=a.useMemo(()=>i.length?i.map((p,C)=>{var T,m,S,y,h,v,k,M;return e.jsxs("div",{className:_("flex flex-col bg-background-light p-3 rounded-lg border",C===n?"border-primary":""),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"color",className:"w-4 h-4 aspect-square flex-shrink-0 rounded-full cursor-pointer",defaultValue:p.settings.color,onChange:H=>f(H.target.value,C,"color")}),e.jsx(Z,{defaultValue:p.settings.name,onChange:H=>f(H.target.value,C,"name"),className:"font-medium bg-transparent border-none p-0 focus:ring-0"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8",children:C===n?e.jsx(qe,{onClick:()=>r(null),className:"h-4 w-4"}):e.jsx(ps,{onClick:()=>r(C),className:"h-4 w-4"})}),e.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(ms,{onClick:()=>c(C),className:"h-4 w-4"})})]})]}),(p==null?void 0:p.x)&&e.jsxs("div",{className:"text-sm text-accent-foreground",children:[e.jsx("span",{className:"font-semibold",children:"X: "}),e.jsxs("span",{className:"text-primary",children:[((S=(m=l[((T=p==null?void 0:p.x)==null?void 0:T.fileId)??""])==null?void 0:m.name)==null?void 0:S.slice(0,10))+"..."," :"," "]}),e.jsx("span",{style:{color:p.settings.color},children:(y=p==null?void 0:p.x)==null?void 0:y.column})]}),(p==null?void 0:p.y)&&e.jsxs("div",{className:"text-sm text-accent-foreground",children:[e.jsx("span",{className:"font-semibold",children:"Y: "}),e.jsxs("span",{className:"text-primary",children:[((k=(v=l[((h=p==null?void 0:p.y)==null?void 0:h.fileId)??""])==null?void 0:v.name)==null?void 0:k.slice(0,10))+"..."," :"," "]}),e.jsx("span",{style:{color:p.settings.color},children:(M=p==null?void 0:p.y)==null?void 0:M.column})]})]},C)}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-lg font-semibold mb-0",children:"Traces"}),e.jsx("p",{className:"text-sm text-accent-foreground",children:"Your selections will appear here"})]}),[c,r,f,n,i,l]);return e.jsxs("div",{className:"h-[135px] flex bg-background-light border-b-2 rounded-lg rounded-b-none",children:[e.jsx("div",{className:_("w-3/4 p-2 h-auto overflow-y-auto",i.length&&"grid grid-cols-1 gap-2 md:grid-cols-2"),children:g}),e.jsxs("div",{className:"w-1/4 border-l flex flex-col justify-between gap-5 p-2",children:[e.jsx(at,{value:o,onValueChange:p=>d(p),className:"w-full",children:e.jsx(lt,{className:"w-full flex",children:t.map(p=>e.jsxs(it,{value:p,className:"capitalize w-full",children:[p,"-axis"]},p))})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"algorithm-select",className:"block text-sm font-medium text-foreground mb-1",children:"Auto Selection Algorithm"}),e.jsxs(Ot,{value:"",children:[e.jsx(Vt,{id:"algorithm-select",className:"w-full",children:e.jsx(Ft,{placeholder:"Select algorithm"})}),e.jsxs(Ht,{children:[e.jsx(de,{value:"linear",children:"Linear"}),e.jsx(de,{value:"logarithmic",children:"Logarithmic"}),e.jsx(de,{value:"exponential",children:"Exponential"})]})]})]})]})]})},Oo=a.memo(Lo),Fo=s=>{const{isFileColumnCollapsed:o,selectedFileId:t,setSelectedFileId:n,setIsFileColumnCollapsed:r,uploadedFiles:d,dataGridProps:i}=s,{theme:l}=hs(),c=a.useMemo(()=>Object.entries(d).map(([u,f])=>e.jsx("li",{children:e.jsx(J,{variant:t===u?"default":"outline",className:_("h-auto w-full overflow-hidden transition-all duration-300 shadow-sm hover:shadow-sm"),onClick:()=>n(u),children:e.jsx("span",{className:"w-full text-ellipsis overflow-hidden font-medium ",children:f==null?void 0:f.name})})},u)),[t,n,d]);return e.jsxs("div",{className:"flex-grow flex",children:[e.jsxs("div",{className:`relative py-3 px-2 flex flex-col gap-4 bg-background-light transition-all duration-300 border-r rounded-bl-lg ${o?"w-12":"w-48"}`,children:[e.jsx(J,{variant:"ghost",className:"p-2 absolute right-1 top-1",onClick:()=>r(!o),children:o?e.jsx(Ge,{className:"h-6 w-6"}):e.jsx(ze,{className:"h-6 w-6"})}),!o&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-semibold mb-0 text-sm",children:"Uploaded files"}),e.jsx("ul",{className:"space-y-2 text-sm text-accent-foreground w-full",children:c})]})]}),e.jsx("div",{className:_("flex-grow bg-background-light overflow-y-auto ag-theme-quartz [&_.ag-root-wrapper]:rounded-none [&_.ag-root-wrapper]:border-none",l==="dark"?"ag-theme-quartz-dark":"ag-theme-quartz"),children:t?e.jsx(Ns,{...i}):e.jsx("div",{className:"flex justify-center items-center h-full w-full",children:e.jsx("h3",{className:"text-lg font-semibold mb-1 text-foreground",children:"Select a file to view its data."})})})]})},Vo=a.memo(Fo);function Ho(s){const{chartType:o,allTraces:t,completeTraces:n,addOrUpdateTrace:r}=s,d=Pe(x=>x.files),i=a.useMemo(()=>{const{xRequired:x,yRequired:b}=Ke[o],N=[];return x&&N.push("x"),b&&N.push("y"),N},[o]),[l,c]=a.useState(""),[u,f]=a.useState(i[0]),[g,p]=a.useState(null),[C,T]=a.useState(null),m=n.length,S=g===null?m:g,y=a.useMemo(()=>{var x;return((x=d[l])==null?void 0:x.data)??[]},[l,d]),h=a.useMemo(()=>y.reduce((b,N)=>(Object.keys(N).forEach(j=>{b.includes(j)||b.push(j)}),b),[]).map(b=>({field:b,cellClass:()=>{var j;if(b===C)return"cursor-pointer bg-primary/10";const N=t.find(I=>{var D,V;return((D=I.x)==null?void 0:D.fileId)===l&&I.x.column===b||((V=I.y)==null?void 0:V.fileId)===l&&I.y.column===b});return N?`cursor-pointer bg-hex-${(j=N.settings.color)==null?void 0:j.replace("#","")}/10`:"cursor-pointer"},headerClass:()=>{var j;if(b===C)return"bg-primary/10 hover:!bg-primary/10 cursor-pointer";const N=t.find(I=>{var D,V;return((D=I.x)==null?void 0:D.fileId)===l&&I.x.column===b||((V=I.y)==null?void 0:V.fileId)===l&&I.y.column===b});return N?`cursor-pointer hover:!bg-primary bg-hex-${(j=N.settings.color)==null?void 0:j.replace("#","")}/10`:"cursor-pointer"}})),[t,y,C,l]),v=a.useMemo(()=>({editable:!1,filter:!1,resizable:!0}),[]),k=a.useCallback(x=>{r({[u]:{fileId:l,column:x.colDef.field}},S)},[r,u,l,S]),M=a.useCallback(x=>{T(x.colDef.field||null)},[]),H=a.useCallback(()=>{T(null)},[]),F=a.useCallback(x=>{T(x.column.getId()||null)},[]),B=a.useCallback(()=>{T(null)},[]);return{dataGridProps:{rowData:y,columnDefs:h,defaultColDef:v,suppressRowClickSelection:!0,suppressCellFocus:!0,suppressRowHoverHighlight:!0,suppressHeaderFocus:!0,onCellClicked:k,onCellMouseOver:M,onCellMouseOut:H,onColumnHeaderMouseOver:F,onColumnHeaderMouseLeave:B},defaultTraceIndex:m,selectedTraceIndex:g,setSelectedTraceIndex:p,uploadedFiles:d,selectedFileId:l,axisOptions:i,activeAxis:u,setActiveAxis:f,setSelectedFileId:c}}function Bo(){const[s,o]=a.useState(!1),[t,n]=a.useState(!1);return{isFileColumnCollapsed:s,setIsFileColumnCollapsed:o,isChartColumnCollapsed:t,setIsChartColumnCollapsed:n}}const $o=s=>{const{addOrUpdateTrace:o,chartType:t,allTraces:n,completeTraces:r,deleteTrace:d,editTraceSettingsItem:i}=s,{uploadedFiles:l,selectedFileId:c,activeAxis:u,axisOptions:f,selectedTraceIndex:g,setSelectedTraceIndex:p,setActiveAxis:C,setSelectedFileId:T,dataGridProps:m}=Ho({chartType:t,allTraces:n,completeTraces:r,addOrUpdateTrace:o}),{isFileColumnCollapsed:S,setIsFileColumnCollapsed:y}=Bo();return e.jsxs(e.Fragment,{children:[e.jsx(Oo,{activeAxis:u,axisOptions:f,onAxisOptionClick:C,traces:r,uploadedFiles:l,selectedTraceIndex:g,onTraceEdit:p,onTraceDelete:d,onTraceSettingsItemEdit:i}),e.jsx(Vo,{dataGridProps:m,isFileColumnCollapsed:S,setIsFileColumnCollapsed:y,uploadedFiles:l,selectedFileId:c,setSelectedFileId:T})]})},zo=a.memo($o);var Go="Label",$t=a.forwardRef((s,o)=>e.jsx(O.label,{...s,ref:o,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||((r=s.onMouseDown)==null||r.call(s,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));$t.displayName=Go;var Uo=$t;function G({className:s,...o}){return e.jsx(Uo,{"data-slot":"label",className:_("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...o})}var Fe="Switch",[Wo,pn]=Me(Fe),[Ko,qo]=Wo(Fe),zt=a.forwardRef((s,o)=>{const{__scopeSwitch:t,name:n,checked:r,defaultChecked:d,required:i,disabled:l,value:c="on",onCheckedChange:u,form:f,...g}=s,[p,C]=a.useState(null),T=K(o,v=>C(v)),m=a.useRef(!1),S=p?f||!!p.closest("form"):!0,[y=!1,h]=xe({prop:r,defaultProp:d,onChange:u});return e.jsxs(Ko,{scope:t,checked:y,disabled:l,children:[e.jsx(O.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":Wt(y),"data-disabled":l?"":void 0,disabled:l,value:c,...g,ref:T,onClick:L(s.onClick,v=>{h(k=>!k),S&&(m.current=v.isPropagationStopped(),m.current||v.stopPropagation())})}),S&&e.jsx(Yo,{control:p,bubbles:!m.current,name:n,value:c,checked:y,required:i,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});zt.displayName=Fe;var Gt="SwitchThumb",Ut=a.forwardRef((s,o)=>{const{__scopeSwitch:t,...n}=s,r=qo(Gt,t);return e.jsx(O.span,{"data-state":Wt(r.checked),"data-disabled":r.disabled?"":void 0,...n,ref:o})});Ut.displayName=Gt;var Yo=s=>{const{control:o,checked:t,bubbles:n=!0,...r}=s,d=a.useRef(null),i=dt(t),l=fs(o);return a.useEffect(()=>{const c=d.current,u=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(u,"checked").set;if(i!==t&&g){const p=new Event("click",{bubbles:n});g.call(c,t),c.dispatchEvent(p)}},[i,t,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...r,tabIndex:-1,ref:d,style:{...s.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Wt(s){return s?"checked":"unchecked"}var Xo=zt,Zo=Ut;function He({className:s,...o}){return e.jsx(Xo,{"data-slot":"switch",className:_("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 inline-flex h-5 w-9 shrink-0 items-center rounded-full border-2 border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...o,children:e.jsx(Zo,{"data-slot":"switch-thumb",className:_("bg-white pointer-events-none block size-4 rounded-full ring-0 shadow-lg transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})}const Jo=s=>{const{chartSettings:o,onSettingChange:t}=s;return e.jsxs("div",{className:"flex-grow flex overflow-y-auto",children:[e.jsxs("div",{className:"flex-1 flex flex-col space-y-4 pl-3 pr-6 border-r-2 border-secondary",children:[e.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[e.jsx(G,{htmlFor:"chart-title",className:"text-sm font-medium",children:"Chart title"}),e.jsx(Z,{type:"text",id:"chart-title",placeholder:"Chart title",className:"flex-1 border-b-2 border-secondary rounded-md p-2",defaultValue:o.title,onChange:n=>{t("title",n.target.value)}})]}),e.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[e.jsx(G,{htmlFor:"chart-caption",className:"text-sm font-medium",children:"Chart title visibility"}),e.jsx(He,{id:"chart-caption",defaultChecked:o.titleVisibility,onCheckedChange:n=>{t("titleVisibility",n)}})]}),e.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[e.jsx(G,{htmlFor:"chart-legend-visibility",className:"text-sm font-medium",children:"Legend visibility"}),e.jsx(He,{id:"chart-legend-visibility",defaultChecked:o.legendVisibility,onCheckedChange:n=>{t("legendVisibility",n)}})]}),e.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[e.jsx(G,{htmlFor:"legend-position-select",className:"text-sm font-medium ",children:"Legend position"}),e.jsxs(Ot,{defaultValue:o.legendPosition,onValueChange:n=>{t("legendPosition",n)},children:[e.jsx(Vt,{id:"legend-position-select",className:"w-[100px]",children:e.jsx(Ft,{placeholder:"Select position"})}),e.jsxs(Ht,{children:[e.jsx(de,{value:"top",children:"Top"}),e.jsx(de,{value:"bottom",children:"Bottom"})]})]})]})]}),e.jsx("div",{className:"flex-1 flex flex-col space-y-4 pl-3 pr-6"})]})},Qo=a.memo(Jo),en=s=>{var r,d,i,l;const{chartSettings:o,onSettingChange:t}=s,n=(c,u,f)=>{if(c==="x"){t("xAxisLimits",{...o.xAxisLimits,[u]:f});return}t("yAxisLimits",{...o.yAxisLimits,[u]:f})};return e.jsxs("div",{className:"flex-grow flex overflow-y-auto",children:[e.jsxs("div",{className:"flex-1 flex flex-col space-y-4 pl-3 pr-6 border-r-2 border-secondary",children:[e.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[e.jsx(G,{htmlFor:"x-axis-label",className:"text-sm font-medium",children:"X axis label"}),e.jsx(Z,{type:"text",id:"x-axis-label",placeholder:"X axis label",className:"flex-1 border-b-2 border-secondary rounded-md p-2",defaultValue:o.xAxisLabel,onChange:c=>{t("xAxisLabel",c.target.value)}})]}),e.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[e.jsx(G,{htmlFor:"x-axis-limits",className:"text-sm font-medium",children:"X axis limits"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{htmlFor:"y-axis-limits-min",className:"text-sm font-medium",children:"Min"}),e.jsx(Z,{type:"number",placeholder:"Min",className:"flex-1 border-b-2 border-secondary rounded-md p-2",defaultValue:(r=o.xAxisLimits)==null?void 0:r.min,onChange:c=>{n("x","min",c.target.value)}})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{htmlFor:"y-axis-limits-min",className:"text-sm font-medium",children:"Max"}),e.jsx(Z,{type:"number",placeholder:"Max",className:"flex-1 border-b-2 border-secondary rounded-md p-2",defaultValue:(d=o.xAxisLimits)==null?void 0:d.max,onChange:c=>{n("x","max",c.target.value)}})]})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col space-y-4 pl-3 pr-6",children:[e.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[e.jsx(G,{htmlFor:"y-axis-label",className:"text-sm font-medium",children:"Y axis label"}),e.jsx(Z,{type:"text",id:"y-axis-label",placeholder:"Y axis label",className:"flex-1 border-b-2 border-secondary rounded-md p-2",defaultValue:o.yAxisLabel,onChange:c=>{t("yAxisLabel",c.target.value)}})]}),e.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[e.jsx(G,{htmlFor:"y-axis-limits",className:"text-sm font-medium",children:"Y axis limits"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{htmlFor:"y-axis-limits-min",className:"text-sm font-medium",children:"Min"}),e.jsx(Z,{type:"number",placeholder:"Min",className:"flex-1 border-b-2 border-secondary rounded-md p-2",defaultValue:(i=o.yAxisLimits)==null?void 0:i.min,onChange:c=>{n("y","min",c.target.value)}})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{htmlFor:"y-axis-limits-min",className:"text-sm font-medium",children:"Max"}),e.jsx(Z,{type:"number",placeholder:"Max",className:"flex-1 border-b-2 border-secondary rounded-md p-2",defaultValue:(l=o.yAxisLimits)==null?void 0:l.max,onChange:c=>{n("y","max",c.target.value)}})]})]})]})]})]})},tn=a.memo(en),fe={GENERAL:{title:"General settings",value:"general-settings"},AXIS:{title:"Axis settings",value:"axis-settings"},SERIES:{title:"Series settings",value:"series-settings"},TOOLTIP:{title:"Tooltip settings",value:"tooltip-settings"}},sn=s=>{const{chartSettings:o,setChartSettings:t}=s,[n,r]=a.useState(fe.GENERAL),d=a.useCallback((l,c)=>{t({...o,[l]:c})},[o,t]),i=Bt(d,1e3);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col space-y-1 border-b-2 rounded-lg rounded-b-none p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-0",children:"Customize Your Chart"}),e.jsx("p",{className:"text-sm text-accent-foreground",children:"Customize your chart with the options below."})]}),e.jsxs("div",{className:"flex-grow flex items-stretch overflow-hidden",children:[e.jsx("ul",{className:"flex flex-col w-[200px] border-r-2",children:Object.values(fe).map(l=>e.jsx("li",{onClick:()=>r(l),className:_("px-4 py-3 border-b-2 cursor-pointer hover:bg-primary/20",l.value===n.value?"bg-primary/50 hover:bg-primary/50":""),children:l.title},l.value))}),e.jsxs("div",{className:"flex-grow flex flex-col gap-5 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:n.title}),n.value===fe.GENERAL.value&&e.jsx(Qo,{chartSettings:o,onSettingChange:i}),n.value===fe.AXIS.value&&e.jsx(tn,{chartSettings:o,onSettingChange:i})]})]})]})},on=a.memo(sn),nn=["#ff0000","#0000ff","#ff00ff","#800000","#808000","#008000","#008080","#800080","#808080"];function rn(s){const{onClose:o}=s,{dataManager:t}=xs(),n=Pe(x=>x.chartToBeEditedId),r=Pe(x=>{var b;return(b=x.charts)==null?void 0:b.find(N=>N.i===n)}),[d,i]=a.useState({type:(r==null?void 0:r.type)??void 0,tracesConfig:(r==null?void 0:r.tracesConfig)??[],chartSettings:(r==null?void 0:r.chartSettings)??{title:"",titleVisibility:!0,legendVisibility:!0,legendPosition:"top",xAxisLabel:"",xAxisLimits:{min:"",max:""},yAxisLabel:"",yAxisLimits:{min:"",max:""}}}),[l,c]=a.useState(r?U.DATA_SELECT.value:U.CHART_TYPE_SELECT.value),u=d.type,f=d.chartSettings,g=d.tracesConfig.filter(x=>{if(!u)return!1;const{xRequired:b,yRequired:N}=Ke[u];switch(!0){case(b&&N):return!!(x!=null&&x.x&&(x!=null&&x.y));case(b&&!N):return!!(x!=null&&x.x);case(!b&&N):return!!(x!=null&&x.y);default:return!1}}),p=a.useCallback(x=>{switch(!0){case x===U.CHART_TYPE_SELECT.value:return!1;case x===U.DATA_SELECT.value:return!d.type;case x===U.CUSTOMIZATION.value:return!g.length;default:return!1}},[d.type,g.length]),C=l<=U.CHART_TYPE_SELECT.value,T=a.useMemo(()=>{switch(l){case U.CHART_TYPE_SELECT.value:return!d.type;case U.DATA_SELECT.value:return!g.length;case U.CUSTOMIZATION.value:return!1;default:return!1}},[d.type,g.length,l]),m=l>=U.CUSTOMIZATION.value,S=a.useCallback(x=>{i(b=>({...b,type:x})),c(b=>b+1)},[]),y=a.useCallback(x=>{i(b=>({...b,chartSettings:{...b.chartSettings,...x}}))},[]),h=a.useCallback((x,b)=>{u&&i(N=>{switch(!0){case b===N.tracesConfig.length:return{...N,tracesConfig:[...N.tracesConfig,{...x,settings:{color:nn[b],name:"Trace "+N.tracesConfig.length},id:gs()}]};case(b>-1&&b<N.tracesConfig.length):return{...N,tracesConfig:N.tracesConfig.reduce((j,I,D)=>b!==D?(j.push(I),j):(j.push({...I,...x}),j),[])};default:return N}})},[u]),v=a.useCallback(x=>{i(b=>x<0||x>=b.tracesConfig.length?b:{...b,tracesConfig:b.tracesConfig.filter((N,j)=>x!==j)})},[]),k=a.useCallback((x,b,N)=>{i(j=>b<0||b>=j.tracesConfig.length?j:{...j,tracesConfig:j.tracesConfig.reduce((I,D,V)=>b!==V?(I.push(D),I):(I.push({...D,settings:{...D.settings,[N]:x}}),I),[])})},[]),M=a.useCallback(x=>{c(x)},[]),H=a.useCallback(()=>{C||c(x=>x-1)},[C]),F=a.useCallback(()=>{T||c(x=>x+1)},[T]),B=a.useCallback(async()=>{if(r){t.updateChart(n,{...r,...d}),o();return}t.addChart(d),o()},[d,r,n,t,o]);return{currentStep:l,chartType:u,completeTraces:g,allTraces:d.tracesConfig,traces:g,isLastStep:m,disablePreviousStep:C,disableNextStep:T,chartSettings:f,handleStepChange:M,handleChartTypeSelect:S,handleChartSettingsChange:y,addOrUpdateTrace:h,deleteTrace:v,editTraceSettingsItem:k,finalizeChartSelection:B,handleLoadPreviousStep:H,handleLoadNextStep:F,checkIfStepIsDisabled:p}}function an(){const[s,o]=a.useState(null),t=a.useCallback(n=>{o(n)},[]);return{chartAPI:s,setChartPreviewRef:t}}function mn(s){const{onClose:o}=s,{chartType:t,currentStep:n,allTraces:r,completeTraces:d,addOrUpdateTrace:i,deleteTrace:l,editTraceSettingsItem:c,handleChartTypeSelect:u,handleStepChange:f,finalizeChartSelection:g,handleLoadNextStep:p,handleLoadPreviousStep:C,checkIfStepIsDisabled:T,isLastStep:m,disablePreviousStep:S,disableNextStep:y,chartSettings:h,handleChartSettingsChange:v}=rn({onClose:o}),{chartAPI:k,setChartPreviewRef:M}=an(),H=a.useMemo(()=>n!==2&&n!==3||!d.length?null:e.jsxs("div",{className:"flex-grow flex flex-col w-full h-full",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground px-4",children:h!=null&&h.titleVisibility?h==null?void 0:h.title:""}),e.jsx(vs,{chart:{i:"preview",...bs,tracesConfig:d,type:t,chartSettings:h},chartAPI:k,setRef:M})]}),[k,h,t,d,n,M]);return e.jsx(Ts,{open:!0,onOpenChange:()=>o(),children:e.jsx(js,{className:"!w-[90vw] !max-w-[1800px] h-[90vh] flex flex-col p-0 overflow-hidden gap-0",children:e.jsxs(Ss,{children:[e.jsx(Fs,{}),e.jsxs(at,{value:n.toString(),className:"flex-grow flex flex-col",children:[e.jsx(Ks,{currentStep:n,onStepChange:f,checkIfStepIsDisabled:T}),n===1&&e.jsx(Qs,{onChartSelect:u,tabValue:n.toString(),selectedChartType:t}),(n===2||n===3)&&t&&e.jsx(Zs,{tabValue:n.toString(),chartPreviewJsx:H,sectionJsx:n===2?e.jsx(zo,{chartType:t,completeTraces:d,allTraces:r,addOrUpdateTrace:i,deleteTrace:l,editTraceSettingsItem:c}):e.jsx(on,{chartSettings:h,setChartSettings:v})})]}),e.jsx(Ys,{isLastStep:m,disablePreviousStep:S,onNext:m?g:p,onPrevious:C,disableNextStep:y})]})})})}export{mn as default};
